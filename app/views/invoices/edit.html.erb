<%= render(SubbarComponent.new(heading: "Invoices (#{ @invoiceCount })")) do |c| %>
  <% c.action() do %>
    <%= link_to new_invoice_path, class: "btn btn-success" do %>
      <%= fa_icon "plus" %>
      New Invoice
    <% end %>
  <% end %>
  <% @invoices.each do |invoice| %>
    <%= render(ItemComponent.new(title: invoice.number, url: edit_invoice_path(invoice))) do |c| %>
      <% c.sub() do %>
        <%= @clients.find(invoice.client_id).name %><br>
        <div class="d-flex">
          <div class="flex-grow-1">
            $TBD
          </div>
          <div class="">
            <%= invoice.date %>
          </div>
        </div>
      <% end %>
    <% end %>
  <% end %>
<% end %>
<%= render(StageComponent.new()) do %>
  <%= render(ContainerComponent.new()) do %>
    <%= render(DataComponent.new()) do |c| %>
      <% c.left() do %>
        <%= render(HeadingComponent.new(title: @invoice.number)) do %>
          <%= render(IconComponent.new(name: "file-text-o")) %>
        <% end %>
      <% end %>
      <% c.right() do %>
        <button type="submit" form="invoice-form" class="btn btn-success btn-lg">Save</button>
      <% end %>
    <% end %>
    <%= render(InvoiceComponent.new()) do %>
      <div class="row system-invoice__row">
        <div class="col">
          Branding TBD
        </div>
        <div class="col">
          <%= render(InvoiceHeadingComponent.new(title: "Provider")) %>
          <%= @current_user.email %>
        </div>
      </div>
      <%= render 'form', invoice: @invoice %>
      <div class="row system-invoice__row">
        <div class="col">
          <%= render "items/form" %>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>

<!--<h1>Editing Invoice</h1>

<%= render 'form', invoice: @invoice %>
<%= render "items/form" %>

<%= link_to 'Show', @invoice %> |
<%= link_to 'Back', invoices_path %>
<%= link_to 'Destroy', @invoice, method: :delete, data: { confirm: 'Are you sure?' } %>-->
